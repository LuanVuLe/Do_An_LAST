<UserControl x:Class="Do_An.NVQL_PCGV"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Do_An"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900"
             Background="#F8FAFC"
             HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Tiêu đề -->
        <Border Background="#1F3C88" CornerRadius="10" Padding="12" Margin="0,0,0,20">
            <TextBlock Text="📘  QUẢN LÝ PHÂN CÔNG GIẢNG VIÊN"
                       Foreground="White" FontSize="20" FontWeight="Bold"
                       VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Border>

        <!-- Thông tin nhập -->
        <Border Grid.Row="1" Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,20"
                BorderBrush="#E5E7EB" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Lớp học (hiển thị full: Khóa học - Môn học - Lớp) -->
                <StackPanel Grid.Column="0" Grid.Row="0" Margin="8">
                    <TextBlock Text="Lớp học" FontWeight="SemiBold" Margin="0,0,0,6"/>
                    <ComboBox x:Name="cboLopHoc" Height="36" Padding="6"
                              DisplayMemberPath="TenLopFull" SelectedValuePath="MaLop"/>
                </StackPanel>

                <!-- Giảng viên -->
                <StackPanel Grid.Column="1" Grid.Row="0" Margin="8">
                    <TextBlock Text="Giảng viên" FontWeight="SemiBold" Margin="0,0,0,6"/>
                    <ComboBox x:Name="cboGiaoVien" Height="36" Padding="6"
                              DisplayMemberPath="HoTen" SelectedValuePath="MaGV"/>
                </StackPanel>

                <!-- Ngày phân công -->
                <StackPanel Grid.Column="2" Grid.Row="0" Margin="8">
                    <TextBlock Text="Ngày phân công" FontWeight="SemiBold" Margin="0,0,0,6"/>
                    <DatePicker x:Name="dpNgayPhanCong" Height="36" Padding="6"/>
                </StackPanel>

                <!-- Ghi chú -->
                <StackPanel Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="3" Margin="8,18,8,0">
                    <TextBlock Text="Ghi chú" FontWeight="SemiBold" Margin="0,0,0,6"/>
                    <TextBox x:Name="txtGhiChu" Height="72" Padding="8" TextWrapping="Wrap"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Nút thao tác -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,15">
            <Button Content="➕ Thêm" Width="110" Height="40" Margin="8"
                    Background="#22C55E" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Click="BtnThem_Click"/>
            <Button Content="✏ Sửa" Width="110" Height="40" Margin="8"
                    Background="#3B82F6" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Click="BtnSua_Click"/>
            <Button Content="🗑 Xóa" Width="110" Height="40" Margin="8"
                    Background="#EF4444" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Click="BtnXoa_Click"/>
            <Button Content="🔄 Làm mới" Width="110" Height="40" Margin="8"
                    Background="#6B7280" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Click="BtnLamMoi_Click"/>
        </StackPanel>

        <!-- DataGrid hiển thị full tên lớp: Khóa học - Môn học - Lớp -->
        <Border Grid.Row="3" Background="White" CornerRadius="8" Padding="10"
                BorderBrush="#E5E7EB" BorderThickness="1">
            <DataGrid x:Name="dgPhanCong" AutoGenerateColumns="False"
                      CanUserAddRows="False" CanUserDeleteRows="False"
                      HeadersVisibility="Column"
                      FontSize="14" RowHeight="36" Margin="0"
                      BorderBrush="#E5E7EB" BorderThickness="1"
                      HorizontalGridLinesBrush="#E2E8F0" VerticalGridLinesBrush="#E2E8F0"
                      SelectionMode="Single" SelectionChanged="dgPhanCong_SelectionChanged"
                      IsReadOnly="True">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Mã PC" Binding="{Binding MaPC}" Width="80"/>
                    <DataGridTextColumn Header="Tên lớp" Binding="{Binding TenLopFull}" Width="3*"/>
                    <DataGridTextColumn Header="Giảng viên" Binding="{Binding TenGV}" Width="2*"/>
                    <DataGridTextColumn Header="Ngày phân công" Binding="{Binding NgayPhanCong, StringFormat={}{0:dd/MM/yyyy}}" Width="160"/>
                    <DataGridTextColumn Header="Ghi chú" Binding="{Binding GhiChu}" Width="3*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
