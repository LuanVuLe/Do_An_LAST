<UserControl x:Class="Do_An.Admin_QLTK"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f5f7fa">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header với tìm kiếm -->
        <Border Grid.Row="0" CornerRadius="10" Margin="0,0,0,15">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#1E88E5" Offset="0"/>
                    <GradientStop Color="#1565C0" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>

            <DockPanel LastChildFill="True" Margin="12">
                <TextBlock Text="👤 Quản lý tài khoản"
                           Foreground="White"
                           FontSize="22"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           DockPanel.Dock="Left"/>

                <!-- Ô tìm kiếm -->
                <Border Background="White" CornerRadius="20" Padding="6" DockPanel.Dock="Right">
                    <DockPanel>
                        <TextBox x:Name="txtSearch"
                                 Width="220" Height="28"
                                 BorderThickness="0"
                                 FontSize="14"
                                 VerticalAlignment="Center"
                                 Background="Transparent"
                                 ToolTip="Tìm kiếm tài khoản"
                                 TextChanged="txtSearch_TextChanged"/>
                        <TextBlock Text="🔍" VerticalAlignment="Center" Margin="6,0,0,0"/>
                    </DockPanel>
                </Border>
            </DockPanel>
        </Border>

        <!-- DataGrid hiển thị -->
        <Border Grid.Row="1" Background="White" CornerRadius="12" BorderBrush="#ddd" BorderThickness="1">
            <DataGrid x:Name="dgTaiKhoan"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      RowHeight="40"
                      AlternatingRowBackground="#f0f6ff"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      FontSize="14"
                      Margin="10"
                      BorderThickness="0"
                      SelectionMode="Single"
                      SelectionUnit="FullRow">
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#e3f2fd"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="BorderBrush" Value="#ccc"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        <Setter Property="Padding" Value="8"/>
                    </Style>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Background" Value="White"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#d6e4ff"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#90caf9"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Tên đăng nhập" Binding="{Binding TenDN}" Width="*"/>
                    <DataGridTextColumn Header="Họ tên" Binding="{Binding HoTen}" Width="2*"/>
                    <DataGridTextColumn Header="Loại" Binding="{Binding LoaiNguoiDung}" Width="*"/>
                    <DataGridTextColumn Header="Mật khẩu (hash/placeholder)" Binding="{Binding MatKhau}" Width="*"/>
                    <DataGridTextColumn Header="Trạng thái" Binding="{Binding TrangThai}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Nút chức năng -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
            <Button x:Name="btnThem" Content="➕ Thêm" Width="120" Height="38" Margin="10,0"
                    Background="#43A047" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Cursor="Hand" Click="btnThem_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="20" Padding="6">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2E7D32"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="btnSua" Content="✏ Sửa" Width="120" Height="38" Margin="10,0"
                    Background="#1E88E5" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Cursor="Hand" Click="btnSua_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="20" Padding="6">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1565C0"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="btnXoa" Content="🗑 Xóa" Width="120" Height="38" Margin="10,0"
                    Background="#E53935" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Cursor="Hand" Click="btnXoa_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="20" Padding="6">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#c62828"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="btnKhoa" Content="🔒 Khóa/Mở" Width="140" Height="38" Margin="10,0"
                    Background="#6A1B9A" Foreground="White" FontWeight="Bold"
                    BorderThickness="0" Cursor="Hand" Click="btnKhoa_Click"/>
        </StackPanel>
    </Grid>
</UserControl>
