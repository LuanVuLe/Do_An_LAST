<UserControl x:Class="Do_An.NVQL_HP"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Do_An"
             Height="650" Width="1050"
             Background="#F5F7FA">

    <UserControl.Resources>
        <!-- Nút tròn đồng bộ toàn hệ thống -->
        <Style x:Key="RoundedButton" TargetType="Button">
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Margin" Value="6,0,6,0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="20"
                                Padding="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- TIÊU ĐỀ -->
        <Border Background="#1F3C88" Height="50" CornerRadius="8,8,0,0">
            <TextBlock Text="QUẢN LÝ HỌC PHÍ" 
                       Foreground="White" 
                       FontSize="20" 
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center" />
        </Border>

        <!-- FORM CHI TIẾT -->
        <Border Grid.Row="1" Background="White" CornerRadius="10" Padding="18" Margin="0,0,0,18"
                BorderBrush="#CBD5E1" BorderThickness="1">
            <StackPanel>
                <TextBlock Text="Thông tin học phí" FontSize="18" FontWeight="SemiBold"
                           Foreground="#1F3C88" Margin="0,0,0,15"/>

                <UniformGrid Columns="2" Rows="4" Margin="0,0,0,12">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Mã học phí:" Width="120" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtMaHP" Width="220" Height="30" IsReadOnly="True" Background="#F1F5F9"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Mã học viên:" Width="120" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtMaHV" Width="220" Height="30"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Mã lớp:" Width="120" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtMaLop" Width="220" Height="30"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Số tiền:" Width="120" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtSoTien" Width="220" Height="30"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Đã đóng:" Width="120" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtDaDong" Width="220" Height="30"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Còn nợ:" Width="120" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtConNo" Width="220" Height="30" IsReadOnly="True" Background="#F1F5F9"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Phương thức:" Width="120" VerticalAlignment="Center"/>
                        <ComboBox x:Name="cbPhuongThuc" Width="220" Height="30">
                            <ComboBoxItem Content="Tiền mặt"/>
                            <ComboBoxItem Content="Chuyển khoản"/>
                            <ComboBoxItem Content="Online"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Cập nhật phần ngày đóng hiển thị đẹp hơn -->
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Ngày đóng:" Width="120" VerticalAlignment="Center"/>
                        <DatePicker x:Name="dpNgayDong" Width="220" Height="30" 
                                    SelectedDateFormat="Long"
                                    DisplayDateEnd="{x:Static sys:DateTime.Now}"
                                    xmlns:sys="clr-namespace:System;assembly=mscorlib"/>
                    </StackPanel>
                </UniformGrid>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0">
                    <Button Content="Thêm mới" Background="#1F3C88" Style="{StaticResource RoundedButton}" Click="BtnThemMoi_Click"/>
                    <Button Content="Lưu" Background="#4CAF50" Style="{StaticResource RoundedButton}" Click="BtnLuu_Click"/>
                    <Button Content="Xóa" Background="#E63946" Style="{StaticResource RoundedButton}" Click="BtnXoa_Click"/>
                    <Button Content="Làm mới" Background="#607D8B" Style="{StaticResource RoundedButton}" Click="BtnLamMoi_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- BẢNG DỮ LIỆU -->
        <Border Grid.Row="2" Background="White" CornerRadius="8" Padding="12"
                BorderBrush="#BDC3C7" BorderThickness="1" Margin="0,10,0,0">
            <DataGrid x:Name="dgHocPhi"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      HeadersVisibility="Column"
                      GridLinesVisibility="All"
                      AlternatingRowBackground="#F9FBFD"
                      BorderBrush="#D0D7E2"
                      BorderThickness="1"
                      RowBackground="White"
                      HorizontalGridLinesBrush="#CBD5E1"
                      VerticalGridLinesBrush="#CBD5E1"
                      RowHeight="34"
                      FontSize="14"
                      IsReadOnly="False"
                      SelectionMode="Single"
                      SelectionUnit="FullRow">

                <DataGrid.Resources>
                    <SolidColorBrush x:Key="DataGridHeaderBackground" Color="#1F3C88"/>
                    <SolidColorBrush x:Key="DataGridHeaderForeground" Color="White"/>
                </DataGrid.Resources>

                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{StaticResource DataGridHeaderBackground}"/>
                        <Setter Property="Foreground" Value="{StaticResource DataGridHeaderForeground}"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="8"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Foreground" Value="#2C3E50"/>
                        <Setter Property="FontSize" Value="13.5"/>
                        <Setter Property="Background" Value="White"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#EAF3FF"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.CellStyle>

                <!-- Cập nhật độ rộng để Ngày Đóng hiển thị đầy đủ -->
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Mã HP" Binding="{Binding MaHP}" Width="80" />
                    <DataGridTextColumn Header="Mã HV" Binding="{Binding MaHV}" Width="80" />
                    <DataGridTextColumn Header="Mã Lớp" Binding="{Binding MaLop}" Width="80" />
                    <DataGridTextColumn Header="Số Tiền" Binding="{Binding SoTien}" Width="100" />
                    <DataGridTextColumn Header="Đã Đóng" Binding="{Binding DaDong}" Width="100" />
                    <DataGridTextColumn Header="Còn Nợ" Binding="{Binding ConNo}" Width="100" />
                    <DataGridTextColumn Header="Phương Thức" Binding="{Binding PhuongThuc}" Width="140" />
                    <DataGridTextColumn Header="Ngày Đóng" Binding="{Binding NgayDong, StringFormat='dd/MM/yyyy HH:mm:ss'}" Width="200" />
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
